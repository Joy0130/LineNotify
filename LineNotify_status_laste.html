<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINE æé†’è¨˜äº‹æœ¬ (v20 - å–®æ©Ÿç‰ˆ)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .modal-enter { animation: modalIn 0.2s ease-out forwards; }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .hidden { display: none !important; }
        .btn-active { background-color: #059669 !important; color: white !important; border-color: #059669 !important; }
        .ping-dot { position: relative; display: inline-flex; }
        .ping-dot span { position: absolute; display: inline-flex; height: 100%; width: 100%; border-radius: 9999px; background-color: #10b981; opacity: 0.75; animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite; }
        @keyframes ping { 75%, 100% { transform: scale(2); opacity: 0; } }
    </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800 font-sans">

    <header class="bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-lg sticky top-0 z-20">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i data-lucide="bell" class="w-6 h-6 animate-pulse"></i>
                <h1 class="text-xl font-bold tracking-wide">LINE è¨˜äº‹æœ¬</h1>
                <div id="status-indicator" class="hidden ml-2 flex items-center gap-1 bg-black/20 px-2 py-1 rounded-full text-xs">
                    <span class="ping-dot h-2 w-2 rounded-full bg-emerald-400 mr-1"><span>&#8203;</span></span>
                    <span id="status-text">ç›£æ§ä¸­</span>
                </div>
            </div>
            <div class="flex gap-2">
                <button onclick="toggleBackupPanel()" class="p-2 rounded-full hover:bg-white/10 transition-colors" title="å‚™ä»½èˆ‡é‚„åŸ">
                    <i data-lucide="download-cloud" class="w-6 h-6"></i>
                </button>
                <button onclick="toggleSettings()" class="p-2 rounded-full hover:bg-white/10 transition-colors" title="è¨­å®š">
                    <i data-lucide="settings" class="w-6 h-6"></i>
                </button>
            </div>
        </div>
    </header>

    <div id="toast-container" class="fixed top-20 right-4 z-50 flex flex-col gap-2 pointer-events-none"></div>

    <main class="max-w-4xl mx-auto px-4 py-6 space-y-6">

        <!-- å‚™ä»½é‚„åŸé¢æ¿ -->
        <div id="backup-panel" class="hidden bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500 fade-in">
            <div class="flex justify-between items-start mb-4">
                <h2 class="text-lg font-bold text-slate-700 flex items-center gap-2">
                    <i data-lucide="download-cloud" class="w-5 h-5"></i> è³‡æ–™å‚™ä»½èˆ‡é‚„åŸ
                </h2>
                <button onclick="toggleBackupPanel()" class="text-slate-400 hover:text-slate-600"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <p class="text-sm text-slate-500 mb-4">ä½¿ç”¨æ­¤åŠŸèƒ½å°‡é›»è…¦ä¸Šçš„è¨­å®šè½‰ç§»åˆ°æ‰‹æ©Ÿï¼Œæˆ–å‚™ä»½æ‚¨çš„è³‡æ–™ã€‚</p>
            <div class="grid md:grid-cols-2 gap-4">
                <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                    <h3 class="font-bold text-slate-700 mb-2">1. åŒ¯å‡ºå‚™ä»½ (Download)</h3>
                    <button onclick="exportData()" class="w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2">
                        <i data-lucide="download" class="w-4 h-4"></i> ä¸‹è¼‰å‚™ä»½æª”
                    </button>
                </div>
                <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                    <h3 class="font-bold text-slate-700 mb-2">2. åŒ¯å…¥é‚„åŸ (Upload)</h3>
                    <input type="file" id="import-file" accept=".json" class="hidden" onchange="importData(this)">
                    <button onclick="document.getElementById('import-file').click()" class="w-full py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 flex items-center justify-center gap-2">
                        <i data-lucide="upload" class="w-4 h-4"></i> é¸æ“‡æª”æ¡ˆé‚„åŸ
                    </button>
                </div>
            </div>
        </div>

        <!-- è¨­å®šå€å¡Š -->
        <div id="settings-panel" class="hidden bg-white rounded-xl shadow-md p-6 border-l-4 border-emerald-500 fade-in">
            <div class="flex justify-between items-start mb-4">
                <h2 class="text-lg font-bold text-slate-700 flex items-center gap-2"><i data-lucide="settings" class="w-5 h-5"></i> ä¸²æ¥è¨­å®š</h2>
                <button onclick="toggleSettings()" class="text-slate-400 hover:text-slate-600"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <div class="grid gap-4 md:grid-cols-2">
                <div class="space-y-2">
                    <label class="text-sm font-medium text-slate-600">LINE User ID</label>
                    <input type="text" id="config-userId" placeholder="Uxxxxxxxx..." class="w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none">
                </div>
                <div class="space-y-2">
                    <label class="text-sm font-medium text-slate-600">Channel Access Token</label>
                    <input type="password" id="config-token" placeholder="è¼¸å…¥é•·ä¸² Token..." class="w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none">
                </div>
            </div>
            <div class="mt-4 grid md:grid-cols-2 gap-4">
                <div class="flex items-start gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200">
                   <input type="checkbox" id="config-simulate" class="w-5 h-5 mt-0.5 text-emerald-600 rounded cursor-pointer">
                   <label for="config-simulate" class="text-sm text-slate-700 cursor-pointer select-none"><strong>æ¨¡æ“¬æ¨¡å¼</strong><p class="text-xs text-slate-500 mt-1">ä¸ç™¼é€çœŸå¯¦è«‹æ±‚ï¼Œåƒ…é¡¯ç¤ºé€šçŸ¥ã€‚</p></label>
                 </div>
                 <div class="flex items-start gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200">
                   <input type="checkbox" id="config-proxy" class="w-5 h-5 mt-0.5 text-blue-600 rounded cursor-pointer">
                   <label for="config-proxy" class="text-sm text-slate-700 cursor-pointer select-none"><strong>ä½¿ç”¨ CORS Proxy</strong><p class="text-xs text-slate-500 mt-1">è§£æ±ºç€è¦½å™¨è·¨åŸŸé™åˆ¶ã€‚</p></label>
                 </div>
             </div>
             <div class="mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200 space-y-3">
                <div class="flex items-start gap-3">
                    <input type="checkbox" id="config-keepalive" class="w-5 h-5 mt-0.5 text-amber-600 rounded cursor-pointer">
                    <label for="config-keepalive" class="text-sm text-slate-700 cursor-pointer select-none"><strong>1. èƒŒæ™¯åŸ·è¡Œå„ªåŒ– (Audio Hack)</strong><p class="text-xs text-slate-500 mt-1">é˜²æ­¢åˆ†é è¢«å‡çµã€‚</p></label>
                </div>
                <div class="flex items-start gap-3">
                    <input type="checkbox" id="config-wakelock" class="w-5 h-5 mt-0.5 text-amber-600 rounded cursor-pointer">
                    <label for="config-wakelock" class="text-sm text-slate-700 cursor-pointer select-none"><strong>2. é˜»æ­¢è¢å¹•ä¼‘çœ  (Screen Wake Lock)</strong><p class="text-xs text-slate-500 mt-1">å¼·åˆ¶è¢å¹•ä¿æŒé–‹å•Ÿ (æ‰‹æ©Ÿæ›æ©Ÿå¿…å‚™)ã€‚</p></label>
                </div>
             </div>
             <div class="mt-4 text-right"><button onclick="saveConfig()" class="px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700 text-sm">å„²å­˜è¨­å®š</button></div>
        </div>

        <!-- æ–°å¢è¨˜äº‹å€å¡Š -->
        <div class="bg-white rounded-xl shadow-md p-6">
            <h2 class="text-lg font-bold text-slate-700 mb-4 flex items-center gap-2"><i data-lucide="plus" id="form-icon" class="w-5 h-5 text-emerald-500"></i><span id="form-title">æ–°å¢è¨˜äº‹</span></h2>
            <form id="note-form" onsubmit="handleFormSubmit(event)" class="space-y-4">
                <input type="hidden" id="edit-id" value="">
                
                <!-- åˆ†é¡é¸æ“‡ -->
                <div class="space-y-2">
                    <label class="text-sm font-medium text-slate-600 flex items-center gap-1"><i data-lucide="tag" class="w-4 h-4"></i> åˆ†é¡</label>
                    <select id="note-category" class="w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white">
                        <option value="é‡è¦">é‡è¦</option>
                        <option value="å·¥ä½œ">å·¥ä½œ</option>
                        <option value="ç§äº‹">ç§äº‹</option>
                    </select>
                </div>

                <!-- ä»»å‹™1ï¼šç‹€æ…‹ç‚ºå·²ç™¼é€å¾Œï¼Œé»é¸ç·¨è¼¯é¡¯ç¤ºé¸é …(å®Œæˆã€æœªå®Œæˆ) -->
                <div id="completion-section" class="hidden space-y-2 bg-slate-50 p-3 rounded-lg border border-slate-100">
                    <label class="text-sm font-bold text-slate-700 flex items-center gap-1"><i data-lucide="check-square" class="w-4 h-4"></i> åŸ·è¡Œç‹€æ…‹ (åƒ…å·²ç™¼é€å¯é¸)</label>
                    <select id="note-completion" class="w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white">
                        <option value="">é è¨­</option>
                        <option value="completed">å®Œæˆ (Completed)</option>
                        <option value="incomplete">æœªå®Œæˆ (Incomplete)</option>
                    </select>
                </div>

                <div class="space-y-2">
                    <label class="text-sm font-medium text-slate-600">å…§å®¹</label>
                    <textarea id="note-content" rows="3" placeholder="å¯«ä¸‹è¦åšçš„äº‹æƒ…..." required class="w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none resize-none"></textarea>
                </div>
                <div class="grid md:grid-cols-2 gap-4 items-start">
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-slate-600 flex items-center gap-1"><i data-lucide="clock" class="w-4 h-4"></i> ç™¼é€æé†’æ™‚é–“</label>
                        <input type="datetime-local" id="note-datetime" class="w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none">
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-slate-600 flex items-center gap-1"><i data-lucide="refresh-cw" class="w-4 h-4"></i> é‡è¤‡æé†’</label>
                        <div class="flex gap-2">
                            <select id="repeat-select" onchange="handleRepeatChange(this)" class="w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white">
                                <option value="none">æ²’æœ‰é‡è¤‡</option>
                                <option value="custom">é–‹å•Ÿé‡è¤‡è¨­å®š...</option>
                            </select>
                            <button type="button" id="edit-repeat-btn" onclick="openRepeatModal()" class="hidden p-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 transition-colors"><i data-lucide="edit-3" class="w-5 h-5"></i></button>
                        </div>
                        <div id="repeat-summary" class="text-xs text-emerald-600 font-medium hidden leading-relaxed"></div>
                    </div>
                </div>
                <div class="flex items-end justify-end gap-2 pt-2 border-t border-slate-100 mt-4">
                    <button type="button" id="cancel-btn" onclick="resetForm()" class="hidden px-4 py-2 text-slate-500 bg-slate-100 rounded-lg hover:bg-slate-200">å–æ¶ˆ</button>
                    <button type="submit" class="flex items-center gap-2 px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 shadow-md hover:shadow-lg transition-all"><i data-lucide="save" class="w-4 h-4"></i><span id="submit-btn-text">å„²å­˜è¨˜äº‹</span></button>
                </div>
            </form>
        </div>

        <!-- åˆ—è¡¨å€å¡Š -->
        <div class="space-y-4">
            <h2 class="text-lg font-bold text-slate-700 flex items-center gap-2 px-1"><i data-lucide="calendar" class="w-5 h-5"></i> è¨˜äº‹åˆ—è¡¨ (<span id="note-count">0</span>)</h2>
            <div id="notes-container" class="space-y-8"></div>
            <div id="empty-state" class="hidden text-center py-12 bg-white rounded-xl border-2 border-dashed border-slate-200 text-slate-400"><p>ç›®å‰æ²’æœ‰ä»»ä½•è¨˜äº‹ï¼Œè©¦è‘—æ–°å¢ä¸€ç­†å§ï¼</p></div>
        </div>
    </main>

    <!-- é‡è¤‡è¨­å®šå½ˆè·³è¦–çª— (ä¿æŒä¸è®Š) -->
    <div id="repeat-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md modal-enter overflow-hidden flex flex-col max-h-[90vh]">
            <div class="bg-emerald-600 px-6 py-4 text-white flex justify-between items-center shrink-0">
                <h3 class="font-bold text-lg flex items-center gap-2"><i data-lucide="refresh-cw" class="w-5 h-5"></i> é‡è¤‡è¦å‰‡è¨­å®š</h3>
                <button onclick="closeRepeatModal(false)" class="hover:bg-white/20 rounded-full p-1 transition-colors"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <div class="p-6 space-y-5 overflow-y-auto">
                <div class="space-y-2">
                    <label class="block text-sm font-medium text-slate-700">é–‹å§‹æ—¥æœŸ</label>
                    <input type="datetime-local" id="modal-start-date" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none">
                </div>
                <div class="space-y-2">
                    <label class="block text-sm font-medium text-slate-700">é‡è¤‡é »ç‡</label>
                    <select id="modal-frequency" onchange="handleFrequencyChange(this)" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white">
                        <option value="daily">æ¯å¤© (Daily)</option>
                        <option value="weekly">æ¯é€± (Weekly)</option>
                        <option value="monthly">æ¯æœˆ (Monthly)</option>
                    </select>
                </div>
                <div id="weekly-options" class="hidden p-4 bg-slate-50 rounded-lg border border-slate-200 space-y-3 animate-in fade-in slide-in-from-top-2">
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <label class="block text-sm font-bold text-slate-700">æ–¼ (å¤šé¸)</label>
                            <button type="button" onclick="clearWeeklySelection()" class="text-xs text-rose-500 hover:text-rose-700 font-medium underline">æ¸…ç©º</button>
                        </div>
                        <div class="flex justify-between gap-1">
                            <button type="button" onclick="toggleBtn(this)" data-day="0" class="weekly-btn w-10 h-10 rounded-full border border-slate-300 bg-white text-slate-600 text-sm font-bold hover:bg-slate-100 transition-colors">æ—¥</button>
                            <button type="button" onclick="toggleBtn(this)" data-day="1" class="weekly-btn w-10 h-10 rounded-full border border-slate-300 bg-white text-slate-600 text-sm font-bold hover:bg-slate-100 transition-colors">ä¸€</button>
                            <button type="button" onclick="toggleBtn(this)" data-day="2" class="weekly-btn w-10 h-10 rounded-full border border-slate-300 bg-white text-slate-600 text-sm font-bold hover:bg-slate-100 transition-colors">äºŒ</button>
                            <button type="button" onclick="toggleBtn(this)" data-day="3" class="weekly-btn w-10 h-10 rounded-full border border-slate-300 bg-white text-slate-600 text-sm font-bold hover:bg-slate-100 transition-colors">ä¸‰</button>
                            <button type="button" onclick="toggleBtn(this)" data-day="4" class="weekly-btn w-10 h-10 rounded-full border border-slate-300 bg-white text-slate-600 text-sm font-bold hover:bg-slate-100 transition-colors">å››</button>
                            <button type="button" onclick="toggleBtn(this)" data-day="5" class="weekly-btn w-10 h-10 rounded-full border border-slate-300 bg-white text-slate-600 text-sm font-bold hover:bg-slate-100 transition-colors">äº”</button>
                            <button type="button" onclick="toggleBtn(this)" data-day="6" class="weekly-btn w-10 h-10 rounded-full border border-slate-300 bg-white text-slate-600 text-sm font-bold hover:bg-slate-100 transition-colors">å…­</button>
                        </div>
                    </div>
                </div>
                <div id="monthly-options" class="hidden p-4 bg-slate-50 rounded-lg border border-slate-200 space-y-4 animate-in fade-in slide-in-from-top-2">
                    <div class="space-y-2">
                        <div class="flex justify-between items-center mb-1">
                            <label class="block text-sm font-bold text-slate-700">é¸æ“‡æ—¥æœŸ (å¯å¤šé¸)</label>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-slate-400 font-normal">æŒ‰ä½ Shift å¯é¸ç¯„åœ</span>
                                <button type="button" onclick="clearMonthlySelection()" class="text-xs text-rose-500 hover:text-rose-700 font-medium underline">æ¸…ç©º</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-7 gap-1" id="month-days-grid"></div>
                    </div>
                </div>
                <div class="space-y-2">
                    <label class="block text-sm font-medium text-slate-700">çµæŸæ—¥æœŸ (æœ€å¾Œä¸€å¤©)</label>
                    <input type="datetime-local" id="modal-end-date" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none">
                    <p class="text-xs text-slate-500">è‹¥ä¸è¨­å®šå‰‡è¦–ç‚ºç„¡é™æœŸé‡è¤‡</p>
                </div>
            </div>
            <div class="bg-slate-50 px-6 py-4 flex justify-end gap-3 border-t border-slate-100 shrink-0">
                <button onclick="closeRepeatModal(false)" class="px-4 py-2 text-slate-600 hover:bg-slate-200 rounded-lg transition-colors">å–æ¶ˆ</button>
                <button onclick="saveRepeatModal()" class="px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 shadow-sm">ç¢ºèªè¨­å®š</button>
            </div>
        </div>
    </div>

    <footer class="text-center py-8 text-slate-400 text-sm"><p>Â© 2025 LINE æé†’è¨˜äº‹æœ¬ (v20 æ’ç‰ˆä¿®æ­£ç‰ˆ)</p></footer>

    <script>
        let notes = JSON.parse(localStorage.getItem('line_note_list')) || [];
        let config = JSON.parse(localStorage.getItem('line_note_config')) || { userId: '', channelToken: '', isSimulateMode: false, useProxy: true, keepAlive: false, wakeLock: false };
        let isSending = false, tempRepeatSettings = null, lastClickedDay = null, audioContext = null, wakeLockSentinel = null;

        document.addEventListener('DOMContentLoaded', () => {
            loadConfigToUI(); renderNotes(); lucide.createIcons(); initMonthDaysGrid(); setInterval(checkReminders, 10000);
            const now = new Date(); now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('modal-start-date').value = now.toISOString().slice(0, 16);
            document.getElementById('config-simulate').addEventListener('change', (e) => {
                const proxyCheck = document.getElementById('config-proxy'); proxyCheck.disabled = e.target.checked; proxyCheck.parentElement.classList.toggle('opacity-50', e.target.checked);
            });
            document.getElementById('config-keepalive').addEventListener('change', toggleKeepAlive);
            document.getElementById('config-wakelock').addEventListener('change', toggleWakeLock);
            window.addEventListener('beforeunload', (e) => { e.preventDefault(); e.returnValue = 'ç¨‹å¼åŸ·è¡Œä¸­'; });
            document.addEventListener("visibilitychange", () => { if (document.visibilityState === 'visible') { checkReminders(); if (config.wakeLock) requestWakeLock(); } });
            if(config.keepAlive) toggleKeepAlive({ target: { checked: true } });
            if(config.wakeLock) toggleWakeLock({ target: { checked: true } });
        });

        // --- å‚™ä»½/é‚„åŸ/è¨­å®š/éŸ³è¨Šé‚è¼¯ (ä¿æŒä¸è®Š) ---
        function toggleBackupPanel() { const p=document.getElementById('backup-panel'); p.classList.toggle('hidden'); if(!p.classList.contains('hidden')) document.getElementById('settings-panel').classList.add('hidden'); }
        function exportData() { const d={config,notes,exportedAt:new Date().toISOString()}; const b=new Blob([JSON.stringify(d,null,2)],{type:'application/json'}); const u=URL.createObjectURL(b); const a=document.createElement('a'); a.href=u; a.download=`line_note_backup_${new Date().toISOString().slice(0,10)}.json`; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(u); showToast('å‚™ä»½æª”å·²ä¸‹è¼‰','success'); }
        function importData(i) { const f=i.files[0]; if(!f)return; const r=new FileReader(); r.onload=(e)=>{try{const d=JSON.parse(e.target.result); if(d.config&&d.notes){if(confirm('ç¢ºå®šè¦é‚„åŸå—ï¼Ÿ')){config=d.config; notes=d.notes; localStorage.setItem('line_note_config',JSON.stringify(config)); localStorage.setItem('line_note_list',JSON.stringify(notes)); loadConfigToUI(); renderNotes(); if(config.keepAlive)toggleKeepAlive({target:{checked:true}}); if(config.wakeLock)toggleWakeLock({target:{checked:true}}); showToast('é‚„åŸæˆåŠŸ','success'); toggleBackupPanel();}}else{alert('æ ¼å¼éŒ¯èª¤');}}catch(x){alert('è®€å–å¤±æ•—');}i.value='';}; r.readAsText(f); }
        async function requestWakeLock() { if('wakeLock'in navigator){try{wakeLockSentinel=await navigator.wakeLock.request('screen');updateStatusIndicator(true,'é˜²ä¼‘çœ ON');}catch(e){updateStatusIndicator(false,'é–å®šå¤±æ•—');}}else{showToast('ä¸æ”¯æ´Wake Lock','error');}}
        function toggleWakeLock(e) { if(e.target.checked)requestWakeLock();else{if(wakeLockSentinel)wakeLockSentinel.release();updateStatusIndicator(config.keepAlive,config.keepAlive?'ç›£æ§ä¸­':'');} }
        function toggleKeepAlive(e) { if(e.target.checked){if(!audioContext){try{const AC=window.AudioContext||window.webkitAudioContext;audioContext=new AC();const o=audioContext.createOscillator();const g=audioContext.createGain();g.gain.value=0.0001;o.connect(g);g.connect(audioContext.destination);o.start();updateStatusIndicator(true,'ç›£æ§ä¸­');}catch(e){}}else{audioContext.resume();updateStatusIndicator(true,'ç›£æ§ä¸­');}}else{if(audioContext)audioContext.suspend();updateStatusIndicator(config.wakeLock,config.wakeLock?'é˜²ä¼‘çœ ON':'');} }
        function updateStatusIndicator(s,t) { const i=document.getElementById('status-indicator'); if(s){i.classList.remove('hidden');document.getElementById('status-text').innerText=t;}else{i.classList.add('hidden');} }
        
        // --- æ ¸å¿ƒé‹ç®— ---
        function calculateNextReminder(n) { if(!n.repeat)return null; const {frequency,weekDays,monthDays,endDate}=n.repeat; let next=new Date(n.datetime); if(frequency==='daily')next.setDate(next.getDate()+1); else if(frequency==='weekly'){const d=next.getDay();const s=[...weekDays].sort((a,b)=>a-b);const f=s.find(x=>x>d);if(f!==undefined)next.setDate(next.getDate()+(f-d));else next.setDate(next.getDate()+(7-d)+s[0]);} else if(frequency==='monthly'){const d=next.getDate();const s=[...monthDays].sort((a,b)=>a-b);const f=s.find(x=>x>d);if(f)next.setDate(f);else{next.setMonth(next.getMonth()+1,1);next.setDate(s[0]);}} if(endDate&&next>new Date(endDate))return null; const y=next.getFullYear(),m=String(next.getMonth()+1).padStart(2,'0'),dd=String(next.getDate()).padStart(2,'0'),h=String(next.getHours()).padStart(2,'0'),mm=String(next.getMinutes()).padStart(2,'0'); return `${y}-${m}-${dd}T${h}:${mm}`; }
        function updateNoteStatus(id,s) { notes=notes.map(n=>{if(n.id!==id)return n; if(s&&n.repeat){const nx=calculateNextReminder(n);if(nx)return{...n,datetime:nx,sent:false};else return{...n,sent:true};} return{...n,sent:s};}); saveNotes(); renderNotes(); }
        async function checkReminders() { const now=new Date(); const p=notes.filter(n=>!n.sent&&n.datetime&&new Date(n.datetime)<=now); if(p.length>0){for(const n of p){if(!isSending){const d=(now-new Date(n.datetime))/60000; await sendNotification(n.id,d>1);}}} }
        async function sendNotification(id,catchUp=false) { if(isSending)return; isSending=true; const n=notes.find(x=>x.id===id); if(!n){isSending=false;return;} updateConfigFromUI(); try{const pre=catchUp?'ã€è£œç™¼é€šçŸ¥ã€‘':'ã€æé†’ã€‘'; const txt=`${pre}${n.content}\næ™‚é–“ï¼š${formatDateTime(n.datetime)}`; let suc=false; if(config.isSimulateMode){showToast(`[æ¨¡æ“¬] ${pre} ${n.content}`,'success');suc=true;} else{const u=config.useProxy?`https://corsproxy.io/?${encodeURIComponent('https://api.line.me/v2/bot/message/push')}`:'https://api.line.me/v2/bot/message/push'; const r=await fetch(u,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${config.channelToken}`},body:JSON.stringify({to:config.userId,messages:[{type:'text',text:txt}]})}); if(r.ok){showToast('ç™¼é€æˆåŠŸ','success');suc=true;}else showToast('ç™¼é€å¤±æ•—','error');} if(suc)updateNoteStatus(id,true);}catch(e){showToast('ç¶²çµ¡éŒ¯èª¤','error');}finally{isSending=false;} }

        // --- ä»‹é¢é‚è¼¯ (Modal/UI) ---
        function initMonthDaysGrid() { const g=document.getElementById('month-days-grid'); for(let i=1;i<=31;i++){const b=document.createElement('button');b.className='month-btn w-9 h-9 rounded bg-white border border-slate-200 text-slate-600 text-xs font-bold hover:bg-slate-50 transition-colors';b.innerText=i;b.dataset.day=i;b.onclick=(e)=>toggleMonthDay(b,i,e);g.appendChild(b);} }
        function getRepeatSummaryHtml(s) { if(!s)return ''; let t=''; if(s.frequency==='weekly'){const m=['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'];t=`æ¯é€±çš„ ${(s.weekDays||[]).map(d=>m[d]).join(', ')}`;} else if(s.frequency==='monthly'){t=`æ¯æœˆ ${(s.monthDays||[]).join(', ')} æ—¥`;} else t='æ¯å¤©'; const e=s.endDate?`ï¼Œç›´åˆ° ${formatDateTime(s.endDate)}`:''; return `<span class="font-bold">${t}</span> é‡è¤‡<br/>(å¾ ${formatDateTime(s.startDate)} é–‹å§‹${e})`; }
        function handleRepeatChange(s) { if(s.value==='custom')openRepeatModal(); else{tempRepeatSettings=null;updateRepeatSummaryUI();} }
        function handleFrequencyChange(s) { document.getElementById('weekly-options').classList.toggle('hidden',s.value!=='weekly'); document.getElementById('monthly-options').classList.toggle('hidden',s.value!=='monthly'); }
        function toggleBtn(b) { b.classList.toggle('btn-active'); b.classList.toggle('bg-white'); b.classList.toggle('text-slate-600'); }
        function toggleMonthDay(b,d,e) { if(e.shiftKey&&lastClickedDay!==null){const s=Math.min(lastClickedDay,d),en=Math.max(lastClickedDay,d); document.querySelectorAll('.month-btn').forEach(x=>{const v=parseInt(x.dataset.day);if(v>=s&&v<=en){x.classList.add('btn-active');x.classList.remove('bg-white','text-slate-600');}});} else{toggleBtn(b);lastClickedDay=d;} }
        function clearWeeklySelection() { document.querySelectorAll('.weekly-btn').forEach(b=>{b.classList.remove('btn-active');b.classList.add('bg-white','text-slate-600');}); }
        function clearMonthlySelection() { document.querySelectorAll('.month-btn').forEach(b=>{b.classList.remove('btn-active');b.classList.add('bg-white','text-slate-600');});lastClickedDay=null; }
        function openRepeatModal() { 
            document.getElementById('repeat-modal').classList.remove('hidden'); 
            document.getElementById('weekly-options').classList.add('hidden'); document.getElementById('monthly-options').classList.add('hidden');
            if(tempRepeatSettings) {
                document.getElementById('modal-start-date').value = tempRepeatSettings.startDate||'';
                document.getElementById('modal-frequency').value = tempRepeatSettings.frequency||'daily';
                document.getElementById('modal-end-date').value = tempRepeatSettings.endDate||'';
                if(tempRepeatSettings.frequency==='weekly') { document.getElementById('weekly-options').classList.remove('hidden'); const wd=tempRepeatSettings.weekDays||[]; document.querySelectorAll('.weekly-btn').forEach(b=>updateBtnState(b, wd.includes(parseInt(b.dataset.day)))); }
                else if(tempRepeatSettings.frequency==='monthly') { document.getElementById('monthly-options').classList.remove('hidden'); const md=tempRepeatSettings.monthDays||[]; document.querySelectorAll('.month-btn').forEach(b=>updateBtnState(b, md.includes(parseInt(b.dataset.day)))); }
            } else {
                const mt = document.getElementById('note-datetime').value; if(mt) document.getElementById('modal-start-date').value=mt;
                document.getElementById('modal-end-date').value=''; document.getElementById('modal-frequency').value='daily';
                document.querySelectorAll('.weekly-btn, .month-btn').forEach(b=>updateBtnState(b,false));
            }
        }
        function updateBtnState(b,a) { if(a){ b.classList.add('btn-active'); b.classList.remove('bg-white','text-slate-600'); } else { b.classList.remove('btn-active'); b.classList.add('bg-white','text-slate-600'); } }
        function closeRepeatModal(s) { document.getElementById('repeat-modal').classList.add('hidden'); if(!s && !tempRepeatSettings) document.getElementById('repeat-select').value='none'; }
        function saveRepeatModal() {
            const s=document.getElementById('modal-start-date').value, f=document.getElementById('modal-frequency').value, e=document.getElementById('modal-end-date').value;
            if(!s) { alert('è«‹è¨­å®šé–‹å§‹æ—¥æœŸ'); return; }
            let set = { type:'repeat', startDate:s, frequency:f, endDate:e };
            if(f==='weekly') { const wd=Array.from(document.querySelectorAll('.weekly-btn.btn-active')).map(b=>parseInt(b.dataset.day)).sort((a,b)=>a-b); if(wd.length===0){alert('è«‹é¸æ“‡æ˜ŸæœŸ');return;} set.weekDays=wd; }
            else if(f==='monthly') { const md=Array.from(document.querySelectorAll('.month-btn.btn-active')).map(b=>parseInt(b.dataset.day)).sort((a,b)=>a-b); if(md.length===0){alert('è«‹é¸æ“‡æ—¥æœŸ');return;} set.monthDays=md; }
            tempRepeatSettings=set; closeRepeatModal(true); updateRepeatSummaryUI();
        }
        function updateRepeatSummaryUI() { const div=document.getElementById('repeat-summary'), sel=document.getElementById('repeat-select'), btn=document.getElementById('edit-repeat-btn'); if(tempRepeatSettings){ sel.value='custom'; div.classList.remove('hidden'); btn.classList.remove('hidden'); div.innerHTML=getRepeatSummaryHtml(tempRepeatSettings); } else { sel.value='none'; div.classList.add('hidden'); btn.classList.add('hidden'); div.innerText=''; } }
        
        // --- Form Handling (Updated with Category) ---
        function handleFormSubmit(e) { 
            e.preventDefault(); 
            const cat = document.getElementById('note-category').value;
            const completion = document.getElementById('note-completion').value; // æ–°å¢ï¼šè®€å–å®Œæˆç‹€æ…‹
            const c = document.getElementById('note-content').value; 
            const d = document.getElementById('note-datetime').value; 
            const eid = document.getElementById('edit-id').value; 
            if(!c)return; 

            // é‚è¼¯ï¼šå¦‚æœæ˜¯ç·¨è¼¯æ¨¡å¼ï¼Œä¸”åŸæœ¬å°±æ˜¯å·²ç™¼é€ç‹€æ…‹ï¼Œä¸”æ™‚é–“æ²’æœ‰ä¿®æ”¹ï¼Œå‰‡ä¿æŒã€Œå·²ç™¼é€ã€ï¼Œä¸é‡ç½®ç‚ºå¾…ç™¼é€
            let isSent = false;
            let finalCompletion = ''; // å¦‚æœæ™‚é–“æ”¹äº†ï¼Œå®Œæˆç‹€æ…‹è¦é‡ç½®

            if(eid) {
                const oldNote = notes.find(n => n.id === eid);
                if (oldNote && oldNote.sent) {
                    if (oldNote.datetime === d) {
                        // æ™‚é–“æ²’è®Šï¼Œä¿ç•™å·²ç™¼é€ç‹€æ…‹ï¼Œä¸¦æ›´æ–°å®Œæˆç‹€æ…‹
                        isSent = true;
                        finalCompletion = completion; 
                    } else {
                        // æ™‚é–“è®Šäº†ï¼Œé‡ç½®ç‚ºå¾…ç™¼é€ï¼Œæ¸…ç©ºå®Œæˆç‹€æ…‹
                        isSent = false; 
                        finalCompletion = ''; 
                    }
                } else {
                    // åŸæœ¬æ˜¯å¾…ç™¼é€ï¼Œæˆ–è€…éæœŸæœªç™¼ï¼Œä¿æŒé è¨­
                    isSent = false; 
                    finalCompletion = '';
                }
            }

            const nd = { category: cat, content: c, datetime: d, sent: isSent, completionStatus: finalCompletion, repeat: tempRepeatSettings, updatedAt: new Date().toISOString() }; 
            
            if(eid) notes = notes.map(n=>n.id===eid?{...n, ...nd}:n); 
            else notes = [{id:Date.now().toString(), createdAt:new Date().toISOString(), ...nd}, ...notes]; 
            saveNotes(); resetForm(); renderNotes(); showToast('å·²å„²å­˜','success'); 
        }

        function startEdit(id) { 
            const n = notes.find(x=>x.id===id); if(!n)return; 
            document.getElementById('edit-id').value = n.id; 
            document.getElementById('note-category').value = n.category || 'é‡è¦'; 
            
            // ä»»å‹™1ï¼šç‹€æ…‹ç‚ºå·²ç™¼é€å¾Œï¼Œé¡¯ç¤ºé¸é …
            const completionSection = document.getElementById('completion-section');
            if (n.sent) {
                completionSection.classList.remove('hidden');
                document.getElementById('note-completion').value = n.completionStatus || '';
            } else {
                completionSection.classList.add('hidden');
                document.getElementById('note-completion').value = '';
            }

            document.getElementById('note-content').value = n.content; 
            document.getElementById('note-datetime').value = n.datetime||''; 
            tempRepeatSettings = n.repeat||null; 
            updateRepeatSummaryUI(); 
            document.getElementById('form-title').innerText = 'ç·¨è¼¯è¨˜äº‹'; 
            document.getElementById('submit-btn-text').innerText = 'æ›´æ–°è¨˜äº‹'; 
            document.getElementById('cancel-btn').classList.remove('hidden'); 
            document.getElementById('form-icon').setAttribute('data-lucide','edit-2'); 
            document.getElementById('form-icon').classList.replace('text-emerald-500','text-amber-500'); 
            lucide.createIcons(); 
            window.scrollTo({top:0, behavior:'smooth'}); 
        }

        function resetForm() { 
            document.getElementById('note-form').reset(); 
            document.getElementById('edit-id').value = ''; 
            document.getElementById('note-category').value = 'é‡è¦'; 
            
            // é‡ç½®å®Œæˆç‹€æ…‹å€å¡Š
            document.getElementById('completion-section').classList.add('hidden');
            document.getElementById('note-completion').value = '';

            tempRepeatSettings = null; 
            updateRepeatSummaryUI(); 
            document.getElementById('form-title').innerText = 'æ–°å¢è¨˜äº‹'; 
            document.getElementById('submit-btn-text').innerText = 'å„²å­˜è¨˜äº‹'; 
            document.getElementById('cancel-btn').classList.add('hidden'); 
            document.getElementById('form-icon').setAttribute('data-lucide','plus'); 
            document.getElementById('form-icon').classList.replace('text-amber-500','text-emerald-500'); 
            lucide.createIcons(); 
            const now = new Date(); now.setMinutes(now.getMinutes()-now.getTimezoneOffset()); 
            document.getElementById('modal-start-date').value = now.toISOString().slice(0,16); 
        }

        function deleteNote(id) { if(confirm('ç¢ºå®šåˆªé™¤ï¼Ÿ')) { notes=notes.filter(n=>n.id!==id); if(document.getElementById('edit-id').value===id) resetForm(); saveNotes(); renderNotes(); showToast('å·²åˆªé™¤'); } }
        
        // --- æ¸²æŸ“ (Updated: Task 2 Icons & Fix for whitespace) ---
        function createNoteCardHtml(note) {
            const isExpired = note.datetime && new Date(note.datetime) < new Date();
            let cardStyle = 'bg-white border-slate-100'; 
            let statusClass = 'bg-amber-100 text-amber-700';
            let statusText = '<span><i data-lucide="clock" class="inline w-3 h-3"></i> å¾…ç™¼é€</span>';

            if (note.sent) {
                cardStyle = 'bg-emerald-50 border border-emerald-200';
                statusClass = 'bg-emerald-100 text-emerald-700';
                statusText = '<span><i data-lucide="check-circle" class="inline w-3 h-3"></i> å·²ç™¼é€</span>';
            } else if (isExpired) {
                cardStyle = 'bg-rose-50 border border-rose-200';
                statusClass = 'bg-rose-100 text-rose-700';
                statusText = 'éæœŸæœªç™¼';
            } else {
                cardStyle = 'bg-amber-50 border border-transparent shadow-sm';
            }

            let repeatIcon = note.repeat ? `<span class="ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded flex items-center gap-1"><i data-lucide="refresh-cw" class="w-3 h-3"></i> é‡è¤‡</span>` : '';
            const repeatSummary = note.repeat ? `<div class="mt-3 text-xs text-slate-500 leading-relaxed">${getRepeatSummaryHtml(note.repeat)}</div>` : '';

            // ä»»å‹™2ï¼šå®Œæˆ/æœªå®Œæˆ icon
            let completionIcon = '';
            if (note.sent && note.completionStatus === 'completed') {
                completionIcon = `<i data-lucide="check" class="inline w-5 h-5 text-emerald-700 mr-1 align-text-bottom"></i>`;
            } else if (note.sent && note.completionStatus === 'incomplete') {
                completionIcon = `<i data-lucide="triangle" class="inline w-4 h-4 text-amber-700 fill-current mr-1 align-text-bottom"></i>`;
            }

            return `<div class="relative group rounded-xl p-5 transition-all hover:shadow-md fade-in ${cardStyle}">
                <div class="flex justify-between items-start mb-2">
                    <div class="text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${statusClass}">${statusText}</div>
                    ${repeatIcon}
                </div>
                <div class="pr-2">
                    <p class="text-slate-800 whitespace-pre-wrap font-medium text-lg mb-3">${completionIcon}${escapeHtml(note.content)}</p>
                </div>
                
                <div class="flex items-center justify-between mt-4 pt-4 border-t border-slate-200/50 text-sm">
                    <div class="text-slate-500">${note.datetime ? `<span class="flex items-center gap-1"><i data-lucide="clock" class="w-3.5 h-3.5"></i> ${formatDateTime(note.datetime)}</span>` : '<span class="text-slate-400 italic">ç„¡æé†’</span>'}</div>
                    <div class="flex gap-2 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity">
                        ${(!note.sent && note.datetime) ? `<button onclick="sendNotification('${note.id}')" class="p-2 text-blue-500 hover:bg-blue-50 rounded-lg" title="æ‰‹å‹•ç™¼é€"><i data-lucide="send" class="w-4 h-4"></i></button>` : ''}
                        <button onclick="startEdit('${note.id}')" class="p-2 text-amber-500 hover:bg-amber-50 rounded-lg"><i data-lucide="edit-2" class="w-4 h-4"></i></button>
                        <button onclick="deleteNote('${note.id}')" class="p-2 text-rose-500 hover:bg-rose-50 rounded-lg"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                    </div>
                </div>
                ${repeatSummary}
            </div>`;
        }

        function renderNotes() {
            const container = document.getElementById('notes-container'); 
            const emptyState = document.getElementById('empty-state'); 
            document.getElementById('note-count').innerText = notes.length;

            if (notes.length === 0) {
                emptyState.classList.remove('hidden');
                container.innerHTML = '';
            } else {
                emptyState.classList.add('hidden');
                
                const sortedNotes = [...notes].sort((a, b) => {
                    if (a.sent === b.sent) return new Date(a.datetime || 0) - new Date(b.datetime || 0);
                    return a.sent ? 1 : -1;
                });

                const categories = ['é‡è¦', 'å·¥ä½œ', 'ç§äº‹', 'å…¶ä»–'];
                const groups = { 'é‡è¦': [], 'å·¥ä½œ': [], 'ç§äº‹': [], 'å…¶ä»–': [] };

                sortedNotes.forEach(n => {
                    const cat = (n.category && categories.includes(n.category)) ? n.category : 'å…¶ä»–';
                    groups[cat].push(n);
                });

                let html = '';
                categories.forEach(cat => {
                    if (groups[cat].length > 0) {
                        let headerColor = 'text-slate-600';
                        if (cat === 'é‡è¦') headerColor = 'text-rose-600';
                        else if (cat === 'å·¥ä½œ') headerColor = 'text-blue-600';
                        else if (cat === 'ç§äº‹') headerColor = 'text-emerald-600';

                        html += `<div class="category-section">
                            <h3 class="text-md font-bold ${headerColor} mb-3 mt-2 flex items-center gap-2 border-b pb-2 border-slate-100">
                                <i data-lucide="tag" class="w-4 h-4"></i> ${cat} <span class="text-xs font-normal text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full">${groups[cat].length}</span>
                            </h3>
                            <div class="grid gap-4 sm:grid-cols-1 md:grid-cols-2">
                                ${groups[cat].map(note => createNoteCardHtml(note)).join('')}
                            </div>
                        </div>`;
                    }
                });
                container.innerHTML = html;
            }
            lucide.createIcons();
        }

        // --- Utils (Same as v17) ---
        function saveNotes() { localStorage.setItem('line_note_list', JSON.stringify(notes)); }
        function toggleSettings() { const p=document.getElementById('settings-panel'); p.classList.toggle('hidden'); if(!p.classList.contains('hidden')) document.getElementById('backup-panel').classList.add('hidden'); }
        function loadConfigToUI() { document.getElementById('config-userId').value=config.userId||''; document.getElementById('config-token').value=config.channelToken||''; document.getElementById('config-simulate').checked=config.isSimulateMode; document.getElementById('config-proxy').checked=config.useProxy; document.getElementById('config-keepalive').checked=config.keepAlive||false; document.getElementById('config-wakelock').checked=config.wakeLock||false; document.getElementById('config-simulate').dispatchEvent(new Event('change')); }
        function updateConfigFromUI() { config.userId=document.getElementById('config-userId').value; config.channelToken=document.getElementById('config-token').value; config.isSimulateMode=document.getElementById('config-simulate').checked; config.useProxy=document.getElementById('config-proxy').checked; config.keepAlive=document.getElementById('config-keepalive').checked; config.wakeLock=document.getElementById('config-wakelock').checked; localStorage.setItem('line_note_config', JSON.stringify(config)); }
        function saveConfig() { updateConfigFromUI(); showToast('è¨­å®šå·²å„²å­˜', 'success'); toggleSettings(); }
        function formatDateTime(s) { if(!s)return ''; const d=new Date(s); return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')} ${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`; }
        function escapeHtml(t) { if(!t)return ''; return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g, "&#039;"); }
        function showToast(m,t='info') { const c=document.getElementById('toast-container'); const div=document.createElement('div'); div.className=`${t==='error'?'bg-rose-500':t==='success'?'bg-emerald-500':'bg-blue-500'} text-white px-6 py-3 rounded-lg shadow-xl flex items-center gap-2 pointer-events-auto fade-in transform transition-all duration-300`; div.innerHTML=`<span>${m}</span>`; c.appendChild(div); setTimeout(()=>{div.classList.add('opacity-0','translate-x-full'); setTimeout(()=>div.remove(),300);},3000); }
        function toggleKeepAlive(e) { const isEnabled = e.target.checked; const statusIndicator = document.getElementById('status-indicator'); if (isEnabled) { if (!audioContext) { try { const AudioContext = window.AudioContext || window.webkitAudioContext; audioContext = new AudioContext(); const oscillator = audioContext.createOscillator(); const gainNode = audioContext.createGain(); gainNode.gain.value = 0.0001; oscillator.connect(gainNode); gainNode.connect(audioContext.destination); oscillator.start(); showToast('å·²å•Ÿå‹•èƒŒæ™¯åŸ·è¡Œå„ªåŒ–', 'success'); statusIndicator.classList.remove('hidden'); document.title = "ğŸŸ¢ ç›£æ§ä¸­ - LINE è¨˜äº‹æœ¬"; } catch (err) { showToast('ç€è¦½å™¨ä¸æ”¯æ´ Web Audio API', 'error'); } } else { audioContext.resume(); statusIndicator.classList.remove('hidden'); } } else { if (audioContext) { audioContext.suspend(); statusIndicator.classList.add('hidden'); document.title = "LINE æé†’è¨˜äº‹æœ¬ (v20)"; } } }
    </script>
</body>
</html>